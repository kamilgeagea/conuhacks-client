{"ast":null,"code":"import { useCallback, useEffect, useLayoutEffect, useRef, useState, createContext, useContext, forwardRef, useImperativeHandle, useMemo, createElement, Children, cloneElement } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useMotionValue, useReducedMotion, animate, AnimatePresence, motion, useTransform } from 'framer-motion';\nimport { useLayoutEffect as useLayoutEffect$1, isIOS, chain, getScrollParent } from '@react-aria/utils';\nimport { mergeRefs } from 'react-merge-refs';\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nvar MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\nvar IS_SSR = typeof window === 'undefined';\nvar DEFAULT_SPRING_CONFIG = {\n  stiffness: 300,\n  damping: 30,\n  mass: 0.2\n};\nvar DRAG_CLOSE_THRESHOLD = 0.6;\nvar DRAG_VELOCITY_THRESHOLD = 500;\nfunction getClosest(nums, goal) {\n  return nums.reduce(function (prev, curr) {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  });\n}\nvar highlightId = 'react-modal-sheet-highlight';\nfunction applyRootStyles(rootId) {\n  var body = document.querySelector('body');\n  var root = document.querySelector(\"#\" + rootId);\n  if (root) {\n    var p = 24;\n    var h = window.innerHeight;\n    var s = (h - p) / h;\n    body.style.backgroundColor = '#000';\n    root.style.overflow = 'hidden';\n    root.style.willChange = 'transform';\n    root.style.transition = 'transform 200ms linear';\n    root.style.transform = \"translateY(calc(env(safe-area-inset-top) + \" + p / 2 + \"px)) scale(\" + s + \")\"; // prettier-ignore\n\n    root.style.borderTopRightRadius = '10px';\n    root.style.borderTopLeftRadius = '10px'; // Add highlighed overlay to emphasize the modality effect\n\n    var highlight = document.createElement('div');\n    highlight.setAttribute('aria-hidden', 'true');\n    highlight.id = highlightId;\n    highlight.style.position = 'absolute';\n    highlight.style.top = '0px';\n    highlight.style.left = '0px';\n    highlight.style.bottom = '0px';\n    highlight.style.right = '0px';\n    highlight.style.opacity = '0';\n    highlight.style.transition = 'opacity 200ms linear';\n    highlight.style.backgroundColor = 'rgba(150, 150, 150, 0.1)';\n    root.appendChild(highlight);\n    requestAnimationFrame(function () {\n      return highlight.style.opacity = '1';\n    });\n  }\n}\nfunction cleanupRootStyles(rootId) {\n  var body = document.querySelector('body');\n  var root = document.getElementById(rootId);\n  var highlight = document.getElementById(highlightId);\n  function onTransitionEnd() {\n    var _highlight$parentNode;\n    root.style.removeProperty('overflow');\n    root.style.removeProperty('will-change');\n    root.style.removeProperty('transition');\n    body.style.removeProperty('background-color');\n    root.removeEventListener('transitionend', onTransitionEnd);\n    (_highlight$parentNode = highlight.parentNode) == null ? void 0 : _highlight$parentNode.removeChild(highlight);\n  }\n  if (root && highlight) {\n    // Start animating back\n    root.style.removeProperty('border-top-right-radius');\n    root.style.removeProperty('border-top-left-radius');\n    root.style.removeProperty('transform');\n    highlight.style.opacity = '0'; // Remove temp properties after animation is finished\n\n    root.addEventListener('transitionend', onTransitionEnd);\n  }\n}\nfunction inDescendingOrder(arr) {\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i]) return false;\n  }\n  return true;\n}\nfunction validateSnapTo(_ref) {\n  var snapTo = _ref.snapTo,\n    sheetHeight = _ref.sheetHeight;\n  if (snapTo < 0) {\n    console.warn(\"Snap point is out of bounds. Sheet height is \" + sheetHeight + \" but snap point is \" + (sheetHeight + Math.abs(snapTo)) + \".\");\n  }\n  return Math.max(Math.round(snapTo), 0);\n}\nvar useIsomorphicLayoutEffect = IS_SSR ? useEffect : useLayoutEffect;\nvar useModalEffect = function useModalEffect(isOpen, rootId) {\n  var prevOpen = usePrevious(isOpen); // Automatically apply the iOS modal effect to the body when sheet opens/closes\n\n  useEffect(function () {\n    if (rootId && !prevOpen && isOpen) {\n      applyRootStyles(rootId);\n    } else if (rootId && !isOpen && prevOpen) {\n      cleanupRootStyles(rootId);\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n  // Make sure to cleanup modal styles on unmount\n\n  useEffect(function () {\n    return function () {\n      if (rootId && isOpen) cleanupRootStyles(rootId);\n    };\n  }, [isOpen]); // eslint-disable-line\n};\n\nvar useEventCallbacks = function useEventCallbacks(isOpen, callbacks) {\n  var prevOpen = usePrevious(isOpen);\n  var didOpen = useRef(false); // Because of AnimatePrecence we don't have access to latest isOpen value\n  // so we need to read and write to a ref to determine if we are\n  // opening or closing the sheet\n\n  var handleAnimationComplete = useCallback(function () {\n    if (!didOpen.current) {\n      callbacks.current.onOpenEnd == null ? void 0 : callbacks.current.onOpenEnd();\n      didOpen.current = true;\n    } else {\n      callbacks.current.onCloseEnd == null ? void 0 : callbacks.current.onCloseEnd();\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  useEffect(function () {\n    if (!prevOpen && isOpen) {\n      callbacks.current.onOpenStart == null ? void 0 : callbacks.current.onOpenStart();\n    } else if (!isOpen && prevOpen) {\n      callbacks.current.onCloseStart == null ? void 0 : callbacks.current.onCloseStart();\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  return {\n    handleAnimationComplete: handleAnimationComplete\n  };\n};\nfunction useWindowHeight() {\n  var _React$useState = useState(0),\n    windowHeight = _React$useState[0],\n    setWindowHeight = _React$useState[1];\n  useIsomorphicLayoutEffect(function () {\n    var updateHeight = function updateHeight() {\n      return setWindowHeight(window.innerHeight);\n    };\n    window.addEventListener('resize', updateHeight);\n    updateHeight();\n    return function () {\n      return window.removeEventListener('resize', updateHeight);\n    };\n  }, []);\n  return windowHeight;\n}\nfunction usePrevious(state) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = state;\n  });\n  return ref.current;\n} // Userland version of the `useEvent` React hook:\n// RFC: https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md\n\nfunction useEvent(handler) {\n  var handlerRef = useRef();\n  useIsomorphicLayoutEffect(function () {\n    handlerRef.current = handler;\n  });\n  return useCallback(function () {\n    var fn = handlerRef.current;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return fn == null ? void 0 : fn.apply(void 0, args);\n  }, []);\n}\nvar SheetContext = /*#__PURE__*/createContext(undefined);\nvar useSheetContext = function useSheetContext() {\n  var context = useContext(SheetContext);\n  if (!context) throw Error('Sheet context error');\n  return context;\n};\n\n// Source: https://github.com/adobe/react-spectrum/blob/main/packages/@react-aria/overlays/src/usePreventScroll.ts\n\nvar visualViewport = typeof window !== 'undefined' && window.visualViewport; // HTML input types that do not cause the software keyboard to appear.\n\nvar nonTextInputTypes = /*#__PURE__*/new Set(['checkbox', 'radio', 'range', 'color', 'file', 'image', 'button', 'submit', 'reset']); // The number of active usePreventScroll calls. Used to determine whether to revert back to the original page style/scroll position\n\nvar preventScrollCount = 0;\nvar restore;\n/**\r\n * Prevents scrolling on the document body on mount, and\r\n * restores it on unmount. Also ensures that content does not\r\n * shift due to the scrollbars disappearing.\r\n */\n\nfunction usePreventScroll(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var _options = options,\n    isDisabled = _options.isDisabled;\n  useLayoutEffect$1(function () {\n    if (isDisabled) {\n      return;\n    }\n    preventScrollCount++;\n    if (preventScrollCount === 1) {\n      if (isIOS()) {\n        restore = preventScrollMobileSafari();\n      } else {\n        restore = preventScrollStandard();\n      }\n    }\n    return function () {\n      preventScrollCount--;\n      if (preventScrollCount === 0) {\n        restore();\n      }\n    };\n  }, [isDisabled]);\n} // For most browsers, all we need to do is set `overflow: hidden` on the root element, and\n// add some padding to prevent the page from shifting when the scrollbar is hidden.\n\nfunction preventScrollStandard() {\n  return chain(setStyle(document.documentElement, 'paddingRight', window.innerWidth - document.documentElement.clientWidth + \"px\"), setStyle(document.documentElement, 'overflow', 'hidden'));\n} // Mobile Safari is a whole different beast. Even with overflow: hidden,\n// it still scrolls the page in many situations:\n//\n// 1. When the bottom toolbar and address bar are collapsed, page scrolling is always allowed.\n// 2. When the keyboard is visible, the viewport does not resize. Instead, the keyboard covers part of\n//    it, so it becomes scrollable.\n// 3. When tapping on an input, the page always scrolls so that the input is centered in the visual viewport.\n//    This may cause even fixed position elements to scroll off the screen.\n// 4. When using the next/previous buttons in the keyboard to navigate between inputs, the whole page always\n//    scrolls, even if the input is inside a nested scrollable element that could be scrolled instead.\n//\n// In order to work around these cases, and prevent scrolling without jankiness, we do a few things:\n//\n// 1. Prevent default on `touchmove` events that are not in a scrollable element. This prevents touch scrolling\n//    on the window.\n// 2. Prevent default on `touchmove` events inside a scrollable element when the scroll position is at the\n//    top or bottom. This avoids the whole page scrolling instead, but does prevent overscrolling.\n// 3. Prevent default on `touchend` events on input elements and handle focusing the element ourselves.\n// 4. When focusing an input, apply a transform to trick Safari into thinking the input is at the top\n//    of the page, which prevents it from scrolling the page. After the input is focused, scroll the element\n//    into view ourselves, without scrolling the whole page.\n// 5. Offset the body by the scroll position using a negative margin and scroll to the top. This should appear the\n//    same visually, but makes the actual scroll position always zero. This is required to make all of the\n//    above work or Safari will still try to scroll the page when focusing an input.\n// 6. As a last resort, handle window scroll events, and scroll back to the top. This can happen when attempting\n//    to navigate to an input with the next/previous buttons that's outside a modal.\n\nfunction preventScrollMobileSafari() {\n  var scrollable;\n  var lastY = 0;\n  var onTouchStart = function onTouchStart(e) {\n    // Store the nearest scrollable parent element from the element that the user touched.\n    scrollable = getScrollParent(e.target);\n    if (scrollable === document.documentElement && scrollable === document.body) {\n      return;\n    }\n    lastY = e.changedTouches[0].pageY;\n  };\n  var onTouchMove = function onTouchMove(e) {\n    // Prevent scrolling the window.\n    if (scrollable === document.documentElement || scrollable === document.body) {\n      e.preventDefault();\n      return;\n    } // Prevent scrolling up when at the top and scrolling down when at the bottom\n    // of a nested scrollable area, otherwise mobile Safari will start scrolling\n    // the window instead. Unfortunately, this disables bounce scrolling when at\n    // the top but it's the best we can do.\n\n    var y = e.changedTouches[0].pageY;\n    var scrollTop = scrollable.scrollTop;\n    var bottom = scrollable.scrollHeight - scrollable.clientHeight; // Fix for: https://github.com/adobe/react-spectrum/pull/3780/files\n\n    if (bottom === 0) {\n      return;\n    }\n    if (scrollTop <= 0 && y > lastY || scrollTop >= bottom && y < lastY) {\n      e.preventDefault();\n    }\n    lastY = y;\n  };\n  var onTouchEnd = function onTouchEnd(e) {\n    var target = e.target; // Apply this change if we're not already focused on the target element\n\n    if (willOpenKeyboard(target) && target !== document.activeElement) {\n      e.preventDefault(); // Apply a transform to trick Safari into thinking the input is at the top of the page\n      // so it doesn't try to scroll it into view. When tapping on an input, this needs to\n      // be done before the \"focus\" event, so we have to focus the element ourselves.\n\n      target.style.transform = 'translateY(-2000px)';\n      target.focus();\n      requestAnimationFrame(function () {\n        target.style.transform = '';\n      });\n    }\n  };\n  var onFocus = function onFocus(e) {\n    var target = e.target;\n    if (willOpenKeyboard(target)) {\n      // Transform also needs to be applied in the focus event in cases where focus moves\n      // other than tapping on an input directly, e.g. the next/previous buttons in the\n      // software keyboard. In these cases, it seems applying the transform in the focus event\n      // is good enough, whereas when tapping an input, it must be done before the focus event. 🤷‍♂️\n      target.style.transform = 'translateY(-2000px)';\n      requestAnimationFrame(function () {\n        target.style.transform = ''; // This will have prevented the browser from scrolling the focused element into view,\n        // so we need to do this ourselves in a way that doesn't cause the whole page to scroll.\n\n        if (visualViewport) {\n          if (visualViewport.height < window.innerHeight) {\n            // If the keyboard is already visible, do this after one additional frame\n            // to wait for the transform to be removed.\n            requestAnimationFrame(function () {\n              scrollIntoView(target);\n            });\n          } else {\n            // Otherwise, wait for the visual viewport to resize before scrolling so we can\n            // measure the correct position to scroll to.\n            visualViewport.addEventListener('resize', function () {\n              return scrollIntoView(target);\n            }, {\n              once: true\n            });\n          }\n        }\n      });\n    }\n  };\n  var onWindowScroll = function onWindowScroll() {\n    // Last resort. If the window scrolled, scroll it back to the top.\n    // It should always be at the top because the body will have a negative margin (see below).\n    window.scrollTo(0, 0);\n  }; // Record the original scroll position so we can restore it.\n  // Then apply a negative margin to the body to offset it by the scroll position. This will\n  // enable us to scroll the window to the top, which is required for the rest of this to work.\n\n  var scrollX = window.pageXOffset;\n  var scrollY = window.pageYOffset;\n  var restoreStyles = chain(setStyle(document.documentElement, 'paddingRight', window.innerWidth - document.documentElement.clientWidth + \"px\"), setStyle(document.documentElement, 'overflow', 'hidden'), setStyle(document.body, 'marginTop', \"-\" + scrollY + \"px\")); // Scroll to the top. The negative margin on the body will make this appear the same.\n\n  window.scrollTo(0, 0);\n  var removeEvents = chain(addEvent(document, 'touchstart', onTouchStart, {\n    passive: false,\n    capture: true\n  }), addEvent(document, 'touchmove', onTouchMove, {\n    passive: false,\n    capture: true\n  }), addEvent(document, 'touchend', onTouchEnd, {\n    passive: false,\n    capture: true\n  }), addEvent(document, 'focus', onFocus, true), addEvent(window, 'scroll', onWindowScroll));\n  return function () {\n    // Restore styles and scroll the page back to where it was.\n    restoreStyles();\n    removeEvents();\n    window.scrollTo(scrollX, scrollY);\n  };\n} // Sets a CSS property on an element, and returns a function to revert it to the previous value.\n\nfunction setStyle(element, style, value) {\n  var cur = element.style[style];\n  element.style[style] = value;\n  return function () {\n    element.style[style] = cur;\n  };\n} // Adds an event listener to an element, and returns a function to remove it.\n\nfunction addEvent(target, event, handler, options) {\n  target.addEventListener(event, handler, options);\n  return function () {\n    target.removeEventListener(event, handler, options);\n  };\n}\nfunction scrollIntoView(target) {\n  var root = document.scrollingElement || document.documentElement;\n  while (target && target !== root) {\n    // Find the parent scrollable element and adjust the scroll position if the target is not already in view.\n    var scrollable = getScrollParent(target);\n    if (scrollable !== document.documentElement && scrollable !== document.body && scrollable !== target) {\n      var scrollableTop = scrollable.getBoundingClientRect().top;\n      var targetTop = target.getBoundingClientRect().top;\n      if (targetTop > scrollableTop + target.clientHeight) {\n        scrollable.scrollTop += targetTop - scrollableTop;\n      }\n    }\n    target = scrollable.parentElement;\n  }\n}\nfunction willOpenKeyboard(target) {\n  return target instanceof HTMLInputElement && !nonTextInputTypes.has(target.type) || target instanceof HTMLTextAreaElement || target instanceof HTMLElement && target.isContentEditable;\n}\nvar styles = {\n  wrapper: {\n    position: 'fixed',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 9999999,\n    overflow: 'hidden',\n    pointerEvents: 'none'\n  },\n  backdrop: {\n    zIndex: 1,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(51, 51, 51, 0.5)',\n    touchAction: 'none',\n    border: 'none'\n  },\n  container: {\n    zIndex: 2,\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    borderTopRightRadius: '8px',\n    borderTopLeftRadius: '8px',\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\n    display: 'flex',\n    flexDirection: 'column',\n    pointerEvents: 'auto'\n  },\n  headerWrapper: {\n    width: '100%'\n  },\n  header: {\n    height: '40px',\n    width: '100%',\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  indicator: {\n    width: '18px',\n    height: '4px',\n    borderRadius: '99px',\n    backgroundColor: '#ddd'\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    position: 'relative'\n  }\n};\nvar Sheet = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var onOpenStart = _ref.onOpenStart,\n    onOpenEnd = _ref.onOpenEnd,\n    onClose = _ref.onClose,\n    onCloseStart = _ref.onCloseStart,\n    onCloseEnd = _ref.onCloseEnd,\n    onSnap = _ref.onSnap,\n    children = _ref.children,\n    isOpen = _ref.isOpen,\n    snapPoints = _ref.snapPoints,\n    rootId = _ref.rootId,\n    mountPoint = _ref.mountPoint,\n    style = _ref.style,\n    _ref$detent = _ref.detent,\n    detent = _ref$detent === void 0 ? 'full-height' : _ref$detent,\n    _ref$initialSnap = _ref.initialSnap,\n    initialSnap = _ref$initialSnap === void 0 ? 0 : _ref$initialSnap,\n    _ref$springConfig = _ref.springConfig,\n    springConfig = _ref$springConfig === void 0 ? DEFAULT_SPRING_CONFIG : _ref$springConfig,\n    _ref$disableDrag = _ref.disableDrag,\n    disableDrag = _ref$disableDrag === void 0 ? false : _ref$disableDrag,\n    _ref$prefersReducedMo = _ref.prefersReducedMotion,\n    prefersReducedMotion = _ref$prefersReducedMo === void 0 ? false : _ref$prefersReducedMo,\n    rest = _objectWithoutPropertiesLoose(_ref, [\"onOpenStart\", \"onOpenEnd\", \"onClose\", \"onCloseStart\", \"onCloseEnd\", \"onSnap\", \"children\", \"isOpen\", \"snapPoints\", \"rootId\", \"mountPoint\", \"style\", \"detent\", \"initialSnap\", \"springConfig\", \"disableDrag\", \"prefersReducedMotion\"]);\n  var sheetRef = useRef(null);\n  var indicatorRotation = useMotionValue(0);\n  var windowHeight = useWindowHeight();\n  var shouldReduceMotion = useReducedMotion();\n  var reduceMotion = Boolean(prefersReducedMotion || shouldReduceMotion);\n  var animationOptions = reduceMotion ? {\n    type: 'tween',\n    duration: 0.01\n  } : _extends({\n    type: 'spring'\n  }, springConfig); // NOTE: the inital value for `y` doesn't matter since it is overwritten by\n  // the value driven by the `AnimatePresence` component when the sheet is opened\n  // and after that it is driven by the gestures and/or snapping\n\n  var y = useMotionValue(0); // Keep the callback fns up-to-date so that they can be accessed inside\n  // the effect without including them to the dependencies array\n\n  var callbacks = useRef({\n    onOpenStart: onOpenStart,\n    onOpenEnd: onOpenEnd,\n    onCloseStart: onCloseStart,\n    onCloseEnd: onCloseEnd\n  });\n  useIsomorphicLayoutEffect(function () {\n    callbacks.current = {\n      onOpenStart: onOpenStart,\n      onOpenEnd: onOpenEnd,\n      onCloseStart: onCloseStart,\n      onCloseEnd: onCloseEnd\n    };\n  });\n  if (snapPoints) {\n    // Convert negative / percentage snap points to absolute values\n    snapPoints = snapPoints.map(function (point) {\n      // Percentage values e.g. between 0.0 and 1.0\n      if (point > 0 && point <= 1) return Math.round(point * windowHeight);\n      return point < 0 ? windowHeight + point : point; // negative values\n    });\n\n    console.assert(inDescendingOrder(snapPoints) || windowHeight === 0, \"Snap points need to be in descending order got: [\" + snapPoints + \"]\");\n  }\n  var onDrag = useEvent(function (_, _ref2) {\n    var delta = _ref2.delta;\n    // Update drag indicator rotation based on drag velocity\n    var velocity = y.getVelocity();\n    if (velocity > 0) indicatorRotation.set(10);\n    if (velocity < 0) indicatorRotation.set(-10); // Make sure user cannot drag beyond the top of the sheet\n\n    y.set(Math.max(y.get() + delta.y, 0));\n  });\n  var onDragEnd = useEvent(function (_, _ref3) {\n    var velocity = _ref3.velocity;\n    if (velocity.y > DRAG_VELOCITY_THRESHOLD) {\n      // User flicked the sheet down\n      onClose();\n    } else {\n      var sheetEl = sheetRef.current;\n      var sheetHeight = sheetEl.getBoundingClientRect().height;\n      var currentY = y.get();\n      var snapTo = 0;\n      if (snapPoints) {\n        var snapToValues = snapPoints.map(function (p) {\n          return sheetHeight - p;\n        }).filter(function (p) {\n          return p >= 0;\n        }); // negative values can occur with `content-height` detent\n        // Allow snapping to the top of the sheet if detent is set to `content-height`\n\n        if (detent === 'content-height' && !snapToValues.includes(0)) {\n          snapToValues.unshift(0);\n        } // Get the closest snap point\n\n        snapTo = getClosest(snapToValues, currentY);\n      } else if (currentY / sheetHeight > DRAG_CLOSE_THRESHOLD) {\n        // Close if dragged over enough far\n        snapTo = sheetHeight;\n      }\n      snapTo = validateSnapTo({\n        snapTo: snapTo,\n        sheetHeight: sheetHeight\n      }); // Update the spring value so that the sheet is animated to the snap point\n\n      animate(y, snapTo, animationOptions);\n      if (snapPoints && onSnap) {\n        var snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n        var snapIndex = snapPoints.indexOf(getClosest(snapPoints, snapValue)); // prettier-ignore\n\n        onSnap(snapIndex);\n      }\n      if (snapTo >= sheetHeight) onClose();\n    } // Reset indicator rotation after dragging\n\n    indicatorRotation.set(0);\n  }); // Trigger onSnap callback when sheet is opened or closed\n\n  useEffect(function () {\n    if (!snapPoints || !onSnap) return;\n    var snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n    onSnap(snapIndex);\n  }, [isOpen]); // eslint-disable-line\n\n  useImperativeHandle(ref, function () {\n    return {\n      y: y,\n      snapTo: function snapTo(snapIndex) {\n        var sheetEl = sheetRef.current;\n        if (snapPoints && snapPoints[snapIndex] !== undefined && sheetEl !== null) {\n          var sheetHeight = sheetEl.getBoundingClientRect().height;\n          var snapPoint = snapPoints[snapIndex];\n          var snapTo = validateSnapTo({\n            snapTo: sheetHeight - snapPoint,\n            sheetHeight: sheetHeight\n          });\n          animate(y, snapTo, animationOptions);\n          if (onSnap) onSnap(snapIndex);\n          if (snapTo >= sheetHeight) onClose();\n        }\n      }\n    };\n  });\n  useModalEffect(isOpen, rootId); // Framer Motion should handle body scroll locking but it's not working\n  // properly on iOS. Scroll locking from React Aria seems to work much better.\n\n  usePreventScroll({\n    isDisabled: !isOpen\n  });\n  var dragProps = useMemo(function () {\n    var dragProps = {\n      drag: 'y',\n      dragElastic: 0,\n      dragConstraints: {\n        top: 0,\n        bottom: 0\n      },\n      dragMomentum: false,\n      dragPropagation: false,\n      onDrag: onDrag,\n      onDragEnd: onDragEnd\n    };\n    return disableDrag ? undefined : dragProps;\n  }, [disableDrag]); // eslint-disable-line\n\n  var context = {\n    y: y,\n    sheetRef: sheetRef,\n    isOpen: isOpen,\n    initialSnap: initialSnap,\n    snapPoints: snapPoints,\n    detent: detent,\n    indicatorRotation: indicatorRotation,\n    callbacks: callbacks,\n    dragProps: dragProps,\n    windowHeight: windowHeight,\n    animationOptions: animationOptions,\n    reduceMotion: reduceMotion\n  };\n  var sheet = createElement(SheetContext.Provider, {\n    value: context\n  }, createElement(\"div\", Object.assign({}, rest, {\n    ref: ref,\n    style: _extends({}, styles.wrapper, style)\n  }), createElement(AnimatePresence, null, isOpen ? Children.map(children, function (child, i) {\n    return cloneElement(child, {\n      key: \"sheet-child-\" + i\n    });\n  }) : null)));\n  if (IS_SSR) return sheet;\n  return createPortal(sheet, mountPoint != null ? mountPoint : document.body);\n});\nvar SheetContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    _ref$style = _ref.style,\n    style = _ref$style === void 0 ? {} : _ref$style,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"style\", \"className\"]);\n  var _useSheetContext = useSheetContext(),\n    y = _useSheetContext.y,\n    isOpen = _useSheetContext.isOpen,\n    callbacks = _useSheetContext.callbacks,\n    snapPoints = _useSheetContext.snapPoints,\n    _useSheetContext$init = _useSheetContext.initialSnap,\n    initialSnap = _useSheetContext$init === void 0 ? 0 : _useSheetContext$init,\n    sheetRef = _useSheetContext.sheetRef,\n    windowHeight = _useSheetContext.windowHeight,\n    detent = _useSheetContext.detent,\n    animationOptions = _useSheetContext.animationOptions,\n    reduceMotion = _useSheetContext.reduceMotion;\n  var _useEventCallbacks = useEventCallbacks(isOpen, callbacks),\n    handleAnimationComplete = _useEventCallbacks.handleAnimationComplete;\n  var initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n  var maxSnapHeight = snapPoints ? snapPoints[0] : null;\n  var height = maxSnapHeight !== null ? \"min(\" + maxSnapHeight + \"px, \" + MAX_HEIGHT + \")\" : MAX_HEIGHT;\n  return createElement(motion.div, Object.assign({}, rest, {\n    ref: mergeRefs([sheetRef, ref]),\n    className: \"react-modal-sheet-container \" + className,\n    style: _extends({}, styles.container, style, detent === 'full-height' && {\n      height: height\n    }, detent === 'content-height' && {\n      maxHeight: height\n    }, {\n      y: y\n    }),\n    initial: reduceMotion ? false : {\n      y: windowHeight\n    },\n    animate: {\n      y: initialY,\n      transition: animationOptions\n    },\n    exit: {\n      y: windowHeight,\n      transition: animationOptions\n    },\n    onAnimationComplete: handleAnimationComplete\n  }), children);\n});\nvar SheetContent = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    style = _ref.style,\n    disableDrag = _ref.disableDrag,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"style\", \"disableDrag\", \"className\"]);\n  var _useSheetContext = useSheetContext(),\n    dragProps = _useSheetContext.dragProps;\n  var _dragProps = disableDrag ? undefined : dragProps;\n  return createElement(motion.div, Object.assign({}, rest, {\n    ref: ref,\n    className: \"react-modal-sheet-content \" + className,\n    style: _extends({}, styles.content, style)\n  }, _dragProps), children);\n});\nvar SheetHeader = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    style = _ref.style,\n    disableDrag = _ref.disableDrag,\n    rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"style\", \"disableDrag\"]);\n  var _useSheetContext = useSheetContext(),\n    indicatorRotation = _useSheetContext.indicatorRotation,\n    dragProps = _useSheetContext.dragProps;\n  var _dragProps = disableDrag ? undefined : dragProps;\n  var indicator1Transform = useTransform(indicatorRotation, function (r) {\n    return \"translateX(2px) rotate(\" + r + \"deg)\";\n  });\n  var indicator2Transform = useTransform(indicatorRotation, function (r) {\n    return \"translateX(-2px) rotate(\" + -1 * r + \"deg)\";\n  });\n  return createElement(motion.div, Object.assign({}, rest, {\n    ref: ref,\n    style: _extends({}, styles.headerWrapper, style)\n  }, _dragProps), children || createElement(\"div\", {\n    className: \"react-modal-sheet-header\",\n    style: styles.header\n  }, createElement(motion.span, {\n    className: \"react-modal-sheet-drag-indicator\",\n    style: _extends({}, styles.indicator, {\n      transform: indicator1Transform\n    })\n  }), createElement(motion.span, {\n    className: \"react-modal-sheet-drag-indicator\",\n    style: _extends({}, styles.indicator, {\n      transform: indicator2Transform\n    })\n  })));\n});\nvar isClickable = function isClickable(props) {\n  return !!props.onClick || !!props.onTap;\n};\nvar SheetBackdrop = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$style = _ref.style,\n    style = _ref$style === void 0 ? {} : _ref$style,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    rest = _objectWithoutPropertiesLoose(_ref, [\"style\", \"className\"]);\n  var Comp = isClickable(rest) ? motion.button : motion.div;\n  var pointerEvents = isClickable(rest) ? 'auto' : 'none';\n  return createElement(Comp, Object.assign({}, rest, {\n    ref: ref,\n    className: \"react-modal-sheet-backdrop \" + className,\n    style: _extends({}, styles.backdrop, style, {\n      pointerEvents: pointerEvents\n    }),\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    }\n  }));\n});\nvar _SheetCompound = Sheet;\n_SheetCompound.Container = SheetContainer;\n_SheetCompound.Header = SheetHeader;\n_SheetCompound.Content = SheetContent;\n_SheetCompound.Backdrop = SheetBackdrop;\nexport default _SheetCompound;","map":{"version":3,"mappings":"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","names":["MAX_HEIGHT","IS_SSR","window","DEFAULT_SPRING_CONFIG","stiffness","damping","mass","DRAG_CLOSE_THRESHOLD","DRAG_VELOCITY_THRESHOLD","getClosest","nums","goal","reduce","prev","curr","Math","abs","highlightId","applyRootStyles","rootId","body","document","querySelector","root","p","h","innerHeight","s","style","backgroundColor","overflow","willChange","transition","transform","borderTopRightRadius","borderTopLeftRadius","highlight","createElement","setAttribute","id","position","top","left","bottom","right","opacity","appendChild","requestAnimationFrame","cleanupRootStyles","getElementById","onTransitionEnd","removeProperty","removeEventListener","parentNode","removeChild","addEventListener","inDescendingOrder","arr","i","length","validateSnapTo","snapTo","sheetHeight","console","warn","max","round","useIsomorphicLayoutEffect","React","useModalEffect","isOpen","prevOpen","usePrevious","useEventCallbacks","callbacks","didOpen","handleAnimationComplete","current","onOpenEnd","onCloseEnd","onOpenStart","onCloseStart","useWindowHeight","windowHeight","setWindowHeight","updateHeight","state","ref","useEvent","handler","handlerRef","fn","args","SheetContext","undefined","useSheetContext","context","Error","visualViewport","nonTextInputTypes","Set","preventScrollCount","restore","usePreventScroll","options","isDisabled","useLayoutEffect","isIOS","preventScrollMobileSafari","preventScrollStandard","chain","setStyle","documentElement","innerWidth","clientWidth","scrollable","lastY","onTouchStart","e","getScrollParent","target","changedTouches","pageY","onTouchMove","preventDefault","y","scrollTop","scrollHeight","clientHeight","onTouchEnd","willOpenKeyboard","activeElement","focus","onFocus","height","scrollIntoView","once","onWindowScroll","scrollTo","scrollX","pageXOffset","scrollY","pageYOffset","restoreStyles","removeEvents","addEvent","passive","capture","element","value","cur","event","scrollingElement","scrollableTop","getBoundingClientRect","targetTop","parentElement","HTMLInputElement","has","type","HTMLTextAreaElement","HTMLElement","isContentEditable","styles","wrapper","zIndex","pointerEvents","backdrop","width","touchAction","border","container","boxShadow","display","flexDirection","headerWrapper","header","alignItems","justifyContent","indicator","borderRadius","content","flex","Sheet","onClose","onSnap","children","snapPoints","mountPoint","detent","initialSnap","springConfig","disableDrag","prefersReducedMotion","rest","sheetRef","indicatorRotation","useMotionValue","shouldReduceMotion","useReducedMotion","reduceMotion","Boolean","animationOptions","duration","map","point","assert","onDrag","_","delta","velocity","getVelocity","set","get","onDragEnd","sheetEl","currentY","snapToValues","filter","includes","unshift","animate","snapValue","snapIndex","indexOf","snapPoint","dragProps","drag","dragElastic","dragConstraints","dragMomentum","dragPropagation","sheet","Provider","AnimatePresence","child","key","ReactDOM","SheetContainer","className","initialY","maxSnapHeight","motion","div","mergeRefs","maxHeight","initial","exit","onAnimationComplete","SheetContent","_dragProps","SheetHeader","indicator1Transform","useTransform","r","indicator2Transform","span","isClickable","props","onClick","onTap","SheetBackdrop","Comp","button","_SheetCompound","Container","Header","Content","Backdrop"],"sources":["/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/constants.ts","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/utils.ts","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/hooks.tsx","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/context.tsx","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/use-prevent-scroll.ts","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/styles.ts","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/sheet.tsx","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/SheetContainer.tsx","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/SheetContent.tsx","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/SheetHeader.tsx","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/SheetBackdrop.tsx","/Users/kamilgeagea/Developer/competitions/ConuHacks/client/node_modules/react-modal-sheet/src/index.tsx"],"sourcesContent":["export const MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\n\nexport const IS_SSR = typeof window === 'undefined';\n\nexport const DEFAULT_SPRING_CONFIG = {\n  stiffness: 300,\n  damping: 30,\n  mass: 0.2,\n};\n\nexport const DRAG_CLOSE_THRESHOLD = 0.6;\n\nexport const DRAG_VELOCITY_THRESHOLD = 500;\n","export function getClosest(nums: number[], goal: number) {\n  return nums.reduce((prev, curr) => {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  });\n}\n\nconst highlightId = 'react-modal-sheet-highlight';\n\nexport function applyRootStyles(rootId: string) {\n  const body = document.querySelector('body') as HTMLBodyElement;\n  const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\n\n  if (root) {\n    const p = 24;\n    const h = window.innerHeight;\n    const s = (h - p) / h;\n    body.style.backgroundColor = '#000';\n    root.style.overflow = 'hidden';\n    root.style.willChange = 'transform';\n    root.style.transition = 'transform 200ms linear';\n    root.style.transform = `translateY(calc(env(safe-area-inset-top) + ${p / 2}px)) scale(${s})`; // prettier-ignore\n    root.style.borderTopRightRadius = '10px';\n    root.style.borderTopLeftRadius = '10px';\n\n    // Add highlighed overlay to emphasize the modality effect\n    const highlight = document.createElement('div');\n    highlight.setAttribute('aria-hidden', 'true');\n    highlight.id = highlightId;\n    highlight.style.position = 'absolute';\n    highlight.style.top = '0px';\n    highlight.style.left = '0px';\n    highlight.style.bottom = '0px';\n    highlight.style.right = '0px';\n    highlight.style.opacity = '0';\n    highlight.style.transition = 'opacity 200ms linear';\n    highlight.style.backgroundColor = 'rgba(150, 150, 150, 0.1)';\n\n    root.appendChild(highlight);\n    requestAnimationFrame(() => (highlight.style.opacity = '1'));\n  }\n}\n\nexport function cleanupRootStyles(rootId: string) {\n  const body = document.querySelector('body') as HTMLBodyElement;\n  const root = document.getElementById(rootId) as HTMLDivElement;\n  const highlight = document.getElementById(highlightId) as HTMLDivElement;\n\n  function onTransitionEnd() {\n    root.style.removeProperty('overflow');\n    root.style.removeProperty('will-change');\n    root.style.removeProperty('transition');\n    body.style.removeProperty('background-color');\n    root.removeEventListener('transitionend', onTransitionEnd);\n    highlight.parentNode?.removeChild(highlight);\n  }\n\n  if (root && highlight) {\n    // Start animating back\n    root.style.removeProperty('border-top-right-radius');\n    root.style.removeProperty('border-top-left-radius');\n    root.style.removeProperty('transform');\n    highlight.style.opacity = '0';\n\n    // Remove temp properties after animation is finished\n    root.addEventListener('transitionend', onTransitionEnd);\n  }\n}\n\nexport function inDescendingOrder(arr: number[]) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i]) return false;\n  }\n\n  return true;\n}\n\nexport function validateSnapTo({\n  snapTo,\n  sheetHeight,\n}: {\n  snapTo: number;\n  sheetHeight: number;\n}) {\n  if (snapTo < 0) {\n    console.warn(\n      `Snap point is out of bounds. Sheet height is ${sheetHeight} but snap point is ${sheetHeight +\n        Math.abs(snapTo)}.`\n    );\n  }\n\n  return Math.max(Math.round(snapTo), 0);\n}\n","import * as React from 'react';\n\nimport { IS_SSR } from './constants';\nimport { SheetEvents } from './types';\nimport { applyRootStyles, cleanupRootStyles } from './utils';\n\nexport const useIsomorphicLayoutEffect = IS_SSR\n  ? React.useEffect\n  : React.useLayoutEffect;\n\nexport const useModalEffect = (isOpen: boolean, rootId?: string) => {\n  const prevOpen = usePrevious(isOpen);\n\n  // Automatically apply the iOS modal effect to the body when sheet opens/closes\n  React.useEffect(() => {\n    if (rootId && !prevOpen && isOpen) {\n      applyRootStyles(rootId);\n    } else if (rootId && !isOpen && prevOpen) {\n      cleanupRootStyles(rootId);\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  // Make sure to cleanup modal styles on unmount\n  React.useEffect(() => {\n    return () => {\n      if (rootId && isOpen) cleanupRootStyles(rootId);\n    };\n  }, [isOpen]); // eslint-disable-line\n};\n\nexport const useEventCallbacks = (\n  isOpen: boolean,\n  callbacks: React.MutableRefObject<SheetEvents>\n) => {\n  const prevOpen = usePrevious(isOpen);\n  const didOpen = React.useRef(false);\n\n  // Because of AnimatePrecence we don't have access to latest isOpen value\n  // so we need to read and write to a ref to determine if we are\n  // opening or closing the sheet\n  const handleAnimationComplete = React.useCallback(() => {\n    if (!didOpen.current) {\n      callbacks.current.onOpenEnd?.();\n      didOpen.current = true;\n    } else {\n      callbacks.current.onCloseEnd?.();\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  React.useEffect(() => {\n    if (!prevOpen && isOpen) {\n      callbacks.current.onOpenStart?.();\n    } else if (!isOpen && prevOpen) {\n      callbacks.current.onCloseStart?.();\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  return { handleAnimationComplete };\n};\n\nexport function useWindowHeight() {\n  const [windowHeight, setWindowHeight] = React.useState(0);\n\n  useIsomorphicLayoutEffect(() => {\n    const updateHeight = () => setWindowHeight(window.innerHeight);\n    window.addEventListener('resize', updateHeight);\n    updateHeight();\n    return () => window.removeEventListener('resize', updateHeight);\n  }, []);\n\n  return windowHeight;\n}\n\nexport function usePrevious<T>(state: T): T | undefined {\n  const ref = React.useRef<T>();\n\n  React.useEffect(() => {\n    ref.current = state;\n  });\n\n  return ref.current;\n}\n\n// Userland version of the `useEvent` React hook:\n// RFC: https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md\nexport function useEvent<T extends (...args: any[]) => any>(handler: T) {\n  const handlerRef = React.useRef<T>();\n\n  useIsomorphicLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n\n  return React.useCallback((...args: any[]) => {\n    const fn = handlerRef.current;\n    return fn?.(...args);\n  }, []) as T;\n}\n","import * as React from 'react';\nimport { SheetContextType } from './types';\n\nexport const SheetContext = React.createContext<SheetContextType | undefined>(\n  undefined\n);\n\nexport const useSheetContext = () => {\n  const context = React.useContext(SheetContext);\n  if (!context) throw Error('Sheet context error');\n  return context;\n};\n","// Source: https://github.com/adobe/react-spectrum/blob/main/packages/@react-aria/overlays/src/usePreventScroll.ts\nimport {\n  chain,\n  getScrollParent,\n  isIOS,\n  useLayoutEffect,\n} from '@react-aria/utils';\n\ninterface PreventScrollOptions {\n  /** Whether the scroll lock is disabled. */\n  isDisabled?: boolean;\n}\n\n// @ts-ignore\nconst visualViewport = typeof window !== 'undefined' && window.visualViewport;\n\n// HTML input types that do not cause the software keyboard to appear.\nconst nonTextInputTypes = new Set([\n  'checkbox',\n  'radio',\n  'range',\n  'color',\n  'file',\n  'image',\n  'button',\n  'submit',\n  'reset',\n]);\n\n// The number of active usePreventScroll calls. Used to determine whether to revert back to the original page style/scroll position\nlet preventScrollCount = 0;\nlet restore: any;\n\n/**\n * Prevents scrolling on the document body on mount, and\n * restores it on unmount. Also ensures that content does not\n * shift due to the scrollbars disappearing.\n */\nexport function usePreventScroll(options: PreventScrollOptions = {}) {\n  let { isDisabled } = options;\n\n  useLayoutEffect(() => {\n    if (isDisabled) {\n      return;\n    }\n\n    preventScrollCount++;\n    if (preventScrollCount === 1) {\n      if (isIOS()) {\n        restore = preventScrollMobileSafari();\n      } else {\n        restore = preventScrollStandard();\n      }\n    }\n\n    return () => {\n      preventScrollCount--;\n      if (preventScrollCount === 0) {\n        restore();\n      }\n    };\n  }, [isDisabled]);\n}\n\n// For most browsers, all we need to do is set `overflow: hidden` on the root element, and\n// add some padding to prevent the page from shifting when the scrollbar is hidden.\nfunction preventScrollStandard() {\n  return chain(\n    setStyle(\n      document.documentElement,\n      'paddingRight',\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, 'overflow', 'hidden')\n  );\n}\n\n// Mobile Safari is a whole different beast. Even with overflow: hidden,\n// it still scrolls the page in many situations:\n//\n// 1. When the bottom toolbar and address bar are collapsed, page scrolling is always allowed.\n// 2. When the keyboard is visible, the viewport does not resize. Instead, the keyboard covers part of\n//    it, so it becomes scrollable.\n// 3. When tapping on an input, the page always scrolls so that the input is centered in the visual viewport.\n//    This may cause even fixed position elements to scroll off the screen.\n// 4. When using the next/previous buttons in the keyboard to navigate between inputs, the whole page always\n//    scrolls, even if the input is inside a nested scrollable element that could be scrolled instead.\n//\n// In order to work around these cases, and prevent scrolling without jankiness, we do a few things:\n//\n// 1. Prevent default on `touchmove` events that are not in a scrollable element. This prevents touch scrolling\n//    on the window.\n// 2. Prevent default on `touchmove` events inside a scrollable element when the scroll position is at the\n//    top or bottom. This avoids the whole page scrolling instead, but does prevent overscrolling.\n// 3. Prevent default on `touchend` events on input elements and handle focusing the element ourselves.\n// 4. When focusing an input, apply a transform to trick Safari into thinking the input is at the top\n//    of the page, which prevents it from scrolling the page. After the input is focused, scroll the element\n//    into view ourselves, without scrolling the whole page.\n// 5. Offset the body by the scroll position using a negative margin and scroll to the top. This should appear the\n//    same visually, but makes the actual scroll position always zero. This is required to make all of the\n//    above work or Safari will still try to scroll the page when focusing an input.\n// 6. As a last resort, handle window scroll events, and scroll back to the top. This can happen when attempting\n//    to navigate to an input with the next/previous buttons that's outside a modal.\nfunction preventScrollMobileSafari() {\n  let scrollable: Element;\n  let lastY = 0;\n  let onTouchStart = (e: TouchEvent) => {\n    // Store the nearest scrollable parent element from the element that the user touched.\n    scrollable = getScrollParent(e.target as Element);\n    if (\n      scrollable === document.documentElement &&\n      scrollable === document.body\n    ) {\n      return;\n    }\n\n    lastY = e.changedTouches[0].pageY;\n  };\n\n  let onTouchMove = (e: TouchEvent) => {\n    // Prevent scrolling the window.\n    if (\n      scrollable === document.documentElement ||\n      scrollable === document.body\n    ) {\n      e.preventDefault();\n      return;\n    }\n\n    // Prevent scrolling up when at the top and scrolling down when at the bottom\n    // of a nested scrollable area, otherwise mobile Safari will start scrolling\n    // the window instead. Unfortunately, this disables bounce scrolling when at\n    // the top but it's the best we can do.\n    let y = e.changedTouches[0].pageY;\n    let scrollTop = scrollable.scrollTop;\n    let bottom = scrollable.scrollHeight - scrollable.clientHeight;\n\n    // Fix for: https://github.com/adobe/react-spectrum/pull/3780/files\n    if (bottom === 0) {\n      return;\n    }\n\n    if ((scrollTop <= 0 && y > lastY) || (scrollTop >= bottom && y < lastY)) {\n      e.preventDefault();\n    }\n\n    lastY = y;\n  };\n\n  let onTouchEnd = (e: TouchEvent) => {\n    let target = e.target as HTMLElement;\n\n    // Apply this change if we're not already focused on the target element\n    if (willOpenKeyboard(target) && target !== document.activeElement) {\n      e.preventDefault();\n\n      // Apply a transform to trick Safari into thinking the input is at the top of the page\n      // so it doesn't try to scroll it into view. When tapping on an input, this needs to\n      // be done before the \"focus\" event, so we have to focus the element ourselves.\n      target.style.transform = 'translateY(-2000px)';\n      target.focus();\n      requestAnimationFrame(() => {\n        target.style.transform = '';\n      });\n    }\n  };\n\n  let onFocus = (e: FocusEvent) => {\n    let target = e.target as HTMLElement;\n    if (willOpenKeyboard(target)) {\n      // Transform also needs to be applied in the focus event in cases where focus moves\n      // other than tapping on an input directly, e.g. the next/previous buttons in the\n      // software keyboard. In these cases, it seems applying the transform in the focus event\n      // is good enough, whereas when tapping an input, it must be done before the focus event. 🤷‍♂️\n      target.style.transform = 'translateY(-2000px)';\n      requestAnimationFrame(() => {\n        target.style.transform = '';\n\n        // This will have prevented the browser from scrolling the focused element into view,\n        // so we need to do this ourselves in a way that doesn't cause the whole page to scroll.\n        if (visualViewport) {\n          if (visualViewport.height < window.innerHeight) {\n            // If the keyboard is already visible, do this after one additional frame\n            // to wait for the transform to be removed.\n            requestAnimationFrame(() => {\n              scrollIntoView(target);\n            });\n          } else {\n            // Otherwise, wait for the visual viewport to resize before scrolling so we can\n            // measure the correct position to scroll to.\n            visualViewport.addEventListener(\n              'resize',\n              () => scrollIntoView(target),\n              { once: true }\n            );\n          }\n        }\n      });\n    }\n  };\n\n  let onWindowScroll = () => {\n    // Last resort. If the window scrolled, scroll it back to the top.\n    // It should always be at the top because the body will have a negative margin (see below).\n    window.scrollTo(0, 0);\n  };\n\n  // Record the original scroll position so we can restore it.\n  // Then apply a negative margin to the body to offset it by the scroll position. This will\n  // enable us to scroll the window to the top, which is required for the rest of this to work.\n  let scrollX = window.pageXOffset;\n  let scrollY = window.pageYOffset;\n\n  let restoreStyles = chain(\n    setStyle(\n      document.documentElement,\n      'paddingRight',\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, 'overflow', 'hidden'),\n    setStyle(document.body, 'marginTop', `-${scrollY}px`)\n  );\n\n  // Scroll to the top. The negative margin on the body will make this appear the same.\n  window.scrollTo(0, 0);\n\n  let removeEvents = chain(\n    addEvent(document, 'touchstart', onTouchStart, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'touchmove', onTouchMove, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'touchend', onTouchEnd, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'focus', onFocus, true),\n    addEvent(window, 'scroll', onWindowScroll)\n  );\n\n  return () => {\n    // Restore styles and scroll the page back to where it was.\n    restoreStyles();\n    removeEvents();\n    window.scrollTo(scrollX, scrollY);\n  };\n}\n\n// Sets a CSS property on an element, and returns a function to revert it to the previous value.\nfunction setStyle(element: any, style: string, value: string) {\n  let cur = element.style[style];\n  element.style[style] = value;\n\n  return () => {\n    element.style[style] = cur;\n  };\n}\n\n// Adds an event listener to an element, and returns a function to remove it.\nfunction addEvent<K extends keyof GlobalEventHandlersEventMap>(\n  target: EventTarget,\n  event: K,\n  handler: (this: Document, ev: GlobalEventHandlersEventMap[K]) => any,\n  options?: boolean | AddEventListenerOptions\n) {\n  target.addEventListener(event, handler as any, options);\n  return () => {\n    target.removeEventListener(event, handler as any, options);\n  };\n}\n\nfunction scrollIntoView(target: Element) {\n  let root = document.scrollingElement || document.documentElement;\n  while (target && target !== root) {\n    // Find the parent scrollable element and adjust the scroll position if the target is not already in view.\n    let scrollable = getScrollParent(target);\n    if (\n      scrollable !== document.documentElement &&\n      scrollable !== document.body &&\n      scrollable !== target\n    ) {\n      let scrollableTop = scrollable.getBoundingClientRect().top;\n      let targetTop = target.getBoundingClientRect().top;\n      if (targetTop > scrollableTop + target.clientHeight) {\n        scrollable.scrollTop += targetTop - scrollableTop;\n      }\n    }\n\n    target = scrollable.parentElement as any;\n  }\n}\n\nfunction willOpenKeyboard(target: Element) {\n  return (\n    (target instanceof HTMLInputElement &&\n      !nonTextInputTypes.has(target.type)) ||\n    target instanceof HTMLTextAreaElement ||\n    (target instanceof HTMLElement && target.isContentEditable)\n  );\n}\n","import * as CSS from 'csstype';\n\nconst styles: { [key: string]: CSS.Properties } = {\n  wrapper: {\n    position: 'fixed',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 9999999,\n    overflow: 'hidden',\n    pointerEvents: 'none',\n  },\n  backdrop: {\n    zIndex: 1,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(51, 51, 51, 0.5)',\n    touchAction: 'none', // Disable iOS body scrolling\n    border: 'none',\n  },\n  container: {\n    zIndex: 2,\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    borderTopRightRadius: '8px',\n    borderTopLeftRadius: '8px',\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\n    display: 'flex',\n    flexDirection: 'column',\n    pointerEvents: 'auto',\n  },\n  headerWrapper: {\n    width: '100%',\n  },\n  header: {\n    height: '40px',\n    width: '100%',\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  indicator: {\n    width: '18px',\n    height: '4px',\n    borderRadius: '99px',\n    backgroundColor: '#ddd',\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    position: 'relative',\n  },\n};\n\nexport default styles;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport {\n  animate,\n  AnimatePresence,\n  AnimationOptions,\n  PanInfo,\n  useMotionValue,\n  useReducedMotion,\n} from 'framer-motion';\n\nimport {\n  useModalEffect,\n  useWindowHeight,\n  useIsomorphicLayoutEffect,\n  useEvent,\n} from './hooks';\n\nimport {\n  DEFAULT_SPRING_CONFIG,\n  DRAG_CLOSE_THRESHOLD,\n  DRAG_VELOCITY_THRESHOLD,\n  IS_SSR,\n} from './constants';\n\nimport { SheetContextType, SheetProps } from './types';\nimport { SheetContext } from './context';\nimport { getClosest, inDescendingOrder, validateSnapTo } from './utils';\nimport { usePreventScroll } from './use-prevent-scroll';\nimport styles from './styles';\n\nconst Sheet = React.forwardRef<any, SheetProps>(\n  (\n    {\n      onOpenStart,\n      onOpenEnd,\n      onClose,\n      onCloseStart,\n      onCloseEnd,\n      onSnap,\n      children,\n      isOpen,\n      snapPoints,\n      rootId,\n      mountPoint,\n      style,\n      detent = 'full-height',\n      initialSnap = 0,\n      springConfig = DEFAULT_SPRING_CONFIG,\n      disableDrag = false,\n      prefersReducedMotion = false,\n      ...rest\n    },\n    ref\n  ) => {\n    const sheetRef = React.useRef<any>(null);\n    const indicatorRotation = useMotionValue(0);\n    const windowHeight = useWindowHeight();\n    const shouldReduceMotion = useReducedMotion();\n    const reduceMotion = Boolean(prefersReducedMotion || shouldReduceMotion);\n    const animationOptions: AnimationOptions<number> = reduceMotion\n      ? { type: 'tween', duration: 0.01 }\n      : { type: 'spring', ...springConfig };\n\n    // NOTE: the inital value for `y` doesn't matter since it is overwritten by\n    // the value driven by the `AnimatePresence` component when the sheet is opened\n    // and after that it is driven by the gestures and/or snapping\n    const y = useMotionValue(0);\n\n    // Keep the callback fns up-to-date so that they can be accessed inside\n    // the effect without including them to the dependencies array\n    const callbacks = React.useRef({\n      onOpenStart,\n      onOpenEnd,\n      onCloseStart,\n      onCloseEnd,\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      callbacks.current = {\n        onOpenStart,\n        onOpenEnd,\n        onCloseStart,\n        onCloseEnd,\n      };\n    });\n\n    if (snapPoints) {\n      // Convert negative / percentage snap points to absolute values\n      snapPoints = snapPoints.map(point => {\n        // Percentage values e.g. between 0.0 and 1.0\n        if (point > 0 && point <= 1) return Math.round(point * windowHeight);\n        return point < 0 ? windowHeight + point : point; // negative values\n      });\n\n      console.assert(\n        inDescendingOrder(snapPoints) || windowHeight === 0,\n        `Snap points need to be in descending order got: [${snapPoints}]`\n      );\n    }\n\n    const onDrag = useEvent((_, { delta }: PanInfo) => {\n      // Update drag indicator rotation based on drag velocity\n      const velocity = y.getVelocity();\n\n      if (velocity > 0) indicatorRotation.set(10);\n      if (velocity < 0) indicatorRotation.set(-10);\n\n      // Make sure user cannot drag beyond the top of the sheet\n      y.set(Math.max(y.get() + delta.y, 0));\n    });\n\n    const onDragEnd = useEvent((_, { velocity }: PanInfo) => {\n      if (velocity.y > DRAG_VELOCITY_THRESHOLD) {\n        // User flicked the sheet down\n        onClose();\n      } else {\n        const sheetEl = sheetRef.current as HTMLDivElement;\n        const sheetHeight = sheetEl.getBoundingClientRect().height;\n        const currentY = y.get();\n\n        let snapTo = 0;\n\n        if (snapPoints) {\n          const snapToValues = snapPoints\n            .map(p => sheetHeight - p)\n            .filter(p => p >= 0); // negative values can occur with `content-height` detent\n\n          // Allow snapping to the top of the sheet if detent is set to `content-height`\n          if (detent === 'content-height' && !snapToValues.includes(0)) {\n            snapToValues.unshift(0);\n          }\n\n          // Get the closest snap point\n          snapTo = getClosest(snapToValues, currentY);\n        } else if (currentY / sheetHeight > DRAG_CLOSE_THRESHOLD) {\n          // Close if dragged over enough far\n          snapTo = sheetHeight;\n        }\n\n        snapTo = validateSnapTo({ snapTo, sheetHeight });\n\n        // Update the spring value so that the sheet is animated to the snap point\n        animate(y, snapTo, animationOptions);\n\n        if (snapPoints && onSnap) {\n          const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n          const snapIndex = snapPoints.indexOf(getClosest(snapPoints, snapValue)); // prettier-ignore\n          onSnap(snapIndex);\n        }\n\n        if (snapTo >= sheetHeight) onClose();\n      }\n\n      // Reset indicator rotation after dragging\n      indicatorRotation.set(0);\n    });\n\n    // Trigger onSnap callback when sheet is opened or closed\n    React.useEffect(() => {\n      if (!snapPoints || !onSnap) return;\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n      onSnap(snapIndex);\n    }, [isOpen]); // eslint-disable-line\n\n    React.useImperativeHandle(ref, () => ({\n      y,\n      snapTo: (snapIndex: number) => {\n        const sheetEl = sheetRef.current as HTMLDivElement | null;\n\n        if (\n          snapPoints &&\n          snapPoints[snapIndex] !== undefined &&\n          sheetEl !== null\n        ) {\n          const sheetHeight = sheetEl.getBoundingClientRect().height;\n          const snapPoint = snapPoints[snapIndex];\n          const snapTo = validateSnapTo({\n            snapTo: sheetHeight - snapPoint,\n            sheetHeight,\n          });\n\n          animate(y, snapTo, animationOptions);\n          if (onSnap) onSnap(snapIndex);\n          if (snapTo >= sheetHeight) onClose();\n        }\n      },\n    }));\n\n    useModalEffect(isOpen, rootId);\n\n    // Framer Motion should handle body scroll locking but it's not working\n    // properly on iOS. Scroll locking from React Aria seems to work much better.\n    usePreventScroll({ isDisabled: !isOpen });\n\n    const dragProps = React.useMemo(() => {\n      const dragProps: SheetContextType['dragProps'] = {\n        drag: 'y',\n        dragElastic: 0,\n        dragConstraints: { top: 0, bottom: 0 },\n        dragMomentum: false,\n        dragPropagation: false,\n        onDrag,\n        onDragEnd,\n      };\n\n      return disableDrag ? undefined : dragProps;\n    }, [disableDrag]); // eslint-disable-line\n\n    const context: SheetContextType = {\n      y,\n      sheetRef,\n      isOpen,\n      initialSnap,\n      snapPoints,\n      detent,\n      indicatorRotation,\n      callbacks,\n      dragProps,\n      windowHeight,\n      animationOptions,\n      reduceMotion,\n    };\n\n    const sheet = (\n      <SheetContext.Provider value={context}>\n        <div {...rest} ref={ref} style={{ ...styles.wrapper, ...style }}>\n          <AnimatePresence>\n            {/* NOTE: AnimatePresence requires us to set keys to children */}\n            {isOpen\n              ? React.Children.map(children, (child: any, i) =>\n                  React.cloneElement(child, { key: `sheet-child-${i}` })\n                )\n              : null}\n          </AnimatePresence>\n        </div>\n      </SheetContext.Provider>\n    );\n\n    if (IS_SSR) return sheet;\n\n    return ReactDOM.createPortal(sheet, mountPoint ?? document.body);\n  }\n);\n\nexport default Sheet;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\nimport { mergeRefs } from 'react-merge-refs';\n\nimport { SheetContainerProps } from './types';\nimport { useSheetContext } from './context';\nimport { useEventCallbacks } from './hooks';\nimport { MAX_HEIGHT } from './constants';\nimport styles from './styles';\n\nconst SheetContainer = React.forwardRef<any, SheetContainerProps>(\n  ({ children, style = {}, className = '', ...rest }, ref) => {\n    const {\n      y,\n      isOpen,\n      callbacks,\n      snapPoints,\n      initialSnap = 0,\n      sheetRef,\n      windowHeight,\n      detent,\n      animationOptions,\n      reduceMotion,\n    } = useSheetContext();\n\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n    const maxSnapHeight = snapPoints ? snapPoints[0] : null;\n\n    const height =\n      maxSnapHeight !== null\n        ? `min(${maxSnapHeight}px, ${MAX_HEIGHT})`\n        : MAX_HEIGHT;\n\n    return (\n      <motion.div\n        {...rest}\n        ref={mergeRefs([sheetRef, ref])}\n        className={`react-modal-sheet-container ${className}`}\n        style={{\n          ...styles.container,\n          ...style,\n          ...(detent === 'full-height' && { height }),\n          ...(detent === 'content-height' && { maxHeight: height }),\n          y,\n        }}\n        initial={reduceMotion ? false : { y: windowHeight }}\n        animate={{ y: initialY, transition: animationOptions }}\n        exit={{ y: windowHeight, transition: animationOptions }}\n        onAnimationComplete={handleAnimationComplete}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetContainer;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\n\nimport { SheetDraggableProps } from './types';\nimport { useSheetContext } from './context';\nimport styles from './styles';\n\nconst SheetContent = React.forwardRef<any, SheetDraggableProps>(\n  ({ children, style, disableDrag, className = '', ...rest }, ref) => {\n    const { dragProps } = useSheetContext();\n    const _dragProps = disableDrag ? undefined : dragProps;\n\n    return (\n      <motion.div\n        {...rest}\n        ref={ref}\n        className={`react-modal-sheet-content ${className}`}\n        style={{ ...styles.content, ...style }}\n        {..._dragProps}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetContent;\n","import * as React from 'react';\nimport { motion, useTransform } from 'framer-motion';\n\nimport { SheetDraggableProps } from './types';\nimport { useSheetContext } from './context';\nimport styles from './styles';\n\nconst SheetHeader = React.forwardRef<any, SheetDraggableProps>(\n  ({ children, style, disableDrag, ...rest }, ref) => {\n    const { indicatorRotation, dragProps } = useSheetContext();\n    const _dragProps = disableDrag ? undefined : dragProps;\n\n    const indicator1Transform = useTransform(\n      indicatorRotation,\n      r => `translateX(2px) rotate(${r}deg)`\n    );\n\n    const indicator2Transform = useTransform(\n      indicatorRotation,\n      r => `translateX(-2px) rotate(${-1 * r}deg)`\n    );\n\n    return (\n      <motion.div\n        {...rest}\n        ref={ref}\n        style={{ ...styles.headerWrapper, ...style }}\n        {..._dragProps}\n      >\n        {children || (\n          <div className=\"react-modal-sheet-header\" style={styles.header}>\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator1Transform }}\n            />\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator2Transform }}\n            />\n          </div>\n        )}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetHeader;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\n\nimport { SheetBackdropProps } from './types';\nimport styles from './styles';\n\nconst isClickable = (props: any) => !!props.onClick || !!props.onTap;\n\nconst SheetBackdrop = React.forwardRef<any, SheetBackdropProps>(\n  ({ style = {}, className = '', ...rest }, ref) => {\n    const Comp = isClickable(rest) ? motion.button : motion.div;\n    const pointerEvents = isClickable(rest) ? 'auto' : 'none';\n\n    return (\n      <Comp\n        {...rest}\n        ref={ref}\n        className={`react-modal-sheet-backdrop ${className}`}\n        style={{ ...styles.backdrop, ...style, pointerEvents }}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      />\n    );\n  }\n);\n\nexport default SheetBackdrop;\n","import { MotionValue } from 'framer-motion';\n\nimport Sheet from './sheet';\nimport SheetContainer from './SheetContainer';\nimport SheetContent from './SheetContent';\nimport SheetHeader from './SheetHeader';\nimport SheetBackdrop from './SheetBackdrop';\nimport { SheetCompound } from './types';\n\nexport type SheetRef = {\n  y: MotionValue<number>;\n  snapTo: (index: number) => void;\n};\n\n// HACK: this is needed to get the typing to work properly...\nconst _SheetCompound: any = Sheet;\n_SheetCompound.Container = SheetContainer;\n_SheetCompound.Header = SheetHeader;\n_SheetCompound.Content = SheetContent;\n_SheetCompound.Backdrop = SheetBackdrop;\n\nexport default _SheetCompound as SheetCompound;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}